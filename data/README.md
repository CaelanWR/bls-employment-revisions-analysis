
# Data Directory

This folder contains BLS employment revision datasets generated by `fetch_bls_revisions.py`. The data files are not stored in version control and must be generated locally.

## Required Files

### `bls_revisions_level2_with_paynsa.csv`
**Description**: Broad industry sectors plus total nonfarm employment  
**Generated by**: Running `fetch_bls_revisions.py` with `RUN_LEVEL_2_ANALYSIS = True`  
**Contains**:
- Total nonfarm employment (PAYNSA series)
- 11 level 2 supersectors (Manufacturing, Retail, Healthcare, etc.)
- Initial estimates and revisions for each month from 2012-2025
- ~2,000-2,500 observation-months per sector

**Required for**: `example_visualizations.py` to run charts 1-15

### `bls_revisions_level4_30_Manufacturing.csv`
**Description**: Detailed manufacturing sub-industries  
**Generated by**: Running `fetch_bls_revisions.py` with `RUN_DETAILED_ANALYSIS = True` and `DETAILED_SUPERSECTOR_CODE = "30"`  
**Contains**:
- 20 level 4 manufacturing sub-industries
- Durable goods (wood products, machinery, transportation equipment, etc.)
- Non-durable goods (food, textiles, chemicals, petroleum, etc.)
- Same time period and revision structure as level 2 data

**Required for**: `example_visualizations.py` to run manufacturing deep dive charts 16-18 (optional)

## How to Generate Data

1. **Set your FRED API key** in `fetch_bls_revisions.py`:
   ```python
   API_KEY = "your_fred_api_key_here"
   ```

2. **Configure analysis scope**:
   ```python
   RUN_LEVEL_2_ANALYSIS = True      # Generate level 2 file
   RUN_DETAILED_ANALYSIS = True     # Generate manufacturing file
   DETAILED_SUPERSECTOR_CODE = "30"
   DETAILED_LEVEL = 4
   ```

3. **Run the script**:
   ```bash
   python fetch_bls_revisions.py
   ```

4. **Expected runtime**: 15-30 minutes depending on API response times and selected analyses

## File Structure

All CSV files share the same structure:

| Column | Description |
|--------|-------------|
| `series_id` | BLS/FRED series identifier (e.g., CEU3000000001) |
| `obs_date` | Observation month (first day of month) |
| `estimate_t` | Initial estimate (~7 days after month end) |
| `estimate_t1` | First revision (1 month later) |
| `estimate_t2` | Second revision (2 months later) |
| `vintage_t` | Date of initial release |
| `vintage_t1` | Date of first revision |
| `vintage_t2` | Date of second revision |
| `revision_1month` | t1 - t (thousands of jobs) |
| `revision_1month_pct` | Percentage change from t to t1 |
| `revision_2month` | t2 - t1 (thousands of jobs) |
| `revision_2month_pct` | Percentage change from t1 to t2 |
| `rev2_cum` | t2 - t (cumulative revision, thousands) |
| `rev2_cum_pct` | Cumulative percentage change from t to t2 |
| `rev2_incr` | Same as revision_2month (alias) |
| `rev2_incr_pct` | Same as revision_2month_pct (alias) |
| `industry_name` | Human-readable industry name |
| `supersector_name` | Parent supersector (e.g., "Manufacturing") |
| `display_level` | BLS hierarchy level (2 or 4) |

## When to Regenerate

Regenerate data files when:
- Analyzing a new time period (update `END_DATE` in config)
- BLS releases benchmark revisions (typically February each year)
- Switching to different industries or hierarchy levels
- Experiencing data quality issues

## File Sizes

Typical file sizes:
- `bls_revisions_level2_with_paynsa.csv`: 2-5 MB
- `bls_revisions_level4_30_Manufacturing.csv`: 5-10 MB

Larger files may result from:
- Longer time periods
- More detailed hierarchy levels
- Additional supersectors

## Troubleshooting

**File not found errors**: Ensure `fetch_bls_revisions.py` completed successfully and generated the CSV files in this directory.

**Empty or incomplete data**: Check FRED API key validity and internet connection. Some series may have limited vintage availability.

**Missing manufacturing file**: This is optional. Set `RUN_DETAILED_ANALYSIS = True` in the configuration to generate it.

## Notes

- Data files are excluded from git via `.gitignore` to keep repository size small
- Each user must generate their own data files using their FRED API key
- Files can be safely deleted and regenerated at any time
- The data collection process respects FRED's rate limits (120 requests/minute)
